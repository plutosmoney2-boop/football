<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Premier League — матчи (демо)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --panel: #020617;
      --card: #020617;
      --accent: #22c55e;
      --accent-soft: rgba(34,197,94,0.3);
      --accent-blue: #38bdf8;
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --border: rgba(31,41,55,0.95);
      --danger: #ef4444;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
    body{
      min-height:100vh;
      background:radial-gradient(circle at top,#0f172a 0,#020617 45%,#000 100%);
      color:var(--text);
      display:flex;
      justify-content:center;
      padding:24px;
    }
    .shell{width:100%;max-width:1200px}
    header{
      display:flex;justify-content:space-between;gap:16px;margin-bottom:18px;flex-wrap:wrap;
    }
    .brand{max-width:520px}
    .pill{
      display:inline-flex;align-items:center;gap:6px;padding:3px 9px;border-radius:999px;
      border:1px solid var(--accent-soft);
      background:linear-gradient(120deg,rgba(34,197,94,0.2),rgba(15,23,42,0.98));
      color:var(--accent);font-size:10px;text-transform:uppercase;letter-spacing:0.14em;
    }
    .pill-dot{width:6px;height:6px;border-radius:999px;background:var(--accent);box-shadow:0 0 0 3px rgba(34,197,94,0.35)}
    .title-row{display:flex;align-items:center;gap:10px;margin-top:6px}
    h1{font-size:26px;font-weight:700;letter-spacing:0.04em;text-transform:uppercase}
    .logo{
      width:30px;height:30px;border-radius:12px;border:1px solid rgba(34,197,94,0.8);
      background:radial-gradient(circle at top left,rgba(34,197,94,1),rgba(0,0,0,1));
      display:flex;align-items:center;justify-content:center;font-weight:800;
      color:#022c22;box-shadow:0 0 40px rgba(34,197,94,0.6)
    }
    .subtitle{font-size:13px;color:var(--text-muted);margin-top:4px}
    .meta{display:flex;flex-direction:column;gap:8px;align-items:flex-end;min-width:230px}
    .meta-row{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .meta-pill{
      font-size:10px;padding:3px 8px;border-radius:999px;border:1px solid rgba(148,163,184,0.8);
      color:#cbd5f5;background:radial-gradient(circle at top,rgba(148,163,184,0.3),transparent);
      text-transform:uppercase;letter-spacing:0.12em;
    }
    main{
      border-radius:18px;border:1px solid var(--border);
      background:
        radial-gradient(circle at top left,rgba(34,197,94,0.18),transparent 55%),
        radial-gradient(circle at bottom right,rgba(37,99,235,0.16),transparent 60%),
        linear-gradient(145deg,rgba(15,23,42,0.98),rgba(2,6,23,1));
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 26px 80px rgba(15,23,42,0.98),
        0 0 90px rgba(34,197,94,0.25);
      padding:14px;
      display:grid;grid-template-columns:minmax(0,2.3fr) minmax(0,1.3fr);gap:14px;
    }
    @media(max-width:960px){main{grid-template-columns:minmax(0,1fr)}}
    .left{display:flex;flex-direction:column;gap:10px}
    .filters{
      background:rgba(15,23,42,0.97);border-radius:12px;border:1px solid var(--border);
      padding:10px;
      display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px;align-items:end;
    }
    @media(max-width:960px){.filters{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(max-width:640px){.filters{grid-template-columns:minmax(0,1fr)}}
    .field{display:flex;flex-direction:column;gap:4px}
    .label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.12em}
    .control{position:relative}
    .control select,.control input{
      width:100%;padding:7px 10px;border-radius:999px;border:1px solid var(--border);
      background:radial-gradient(circle at top,rgba(15,23,42,0.92),rgba(15,23,42,1));
      color:var(--text);font-size:13px;outline:none;appearance:none;
    }
    .control input[type="date"]{padding-right:28px}
    .control select:focus,.control input:focus{
      border-color:rgba(34,197,94,0.8);box-shadow:0 0 0 1px rgba(34,197,94,0.6);
    }
    .hint{font-size:10px;color:var(--text-muted)}
    .arrow{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:11px;color:var(--text-muted);pointer-events:none}
    .actions{display:flex;gap:6px;flex-wrap:wrap}
    .btn{
      padding:7px 13px;border-radius:999px;border:1px solid var(--accent);
      background:radial-gradient(circle at top left,rgba(34,197,94,0.9),rgba(34,197,94,0.25));
      color:#022c22;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:0.12em;
      cursor:pointer;display:inline-flex;align-items:center;gap:6px;
      box-shadow:0 0 0 1px rgba(34,197,94,0.4),0 22px 50px rgba(16,185,129,0.45);
      transition:transform .08s,box-shadow .12s,background .12s,opacity .1s;
      white-space:nowrap;
    }
    .btn-secondary{
      border-color:rgba(148,163,184,0.9);
      background:radial-gradient(circle at top,rgba(148,163,184,0.35),rgba(15,23,42,0.98));
      color:#e5e7eb;box-shadow:0 0 0 1px rgba(148,163,184,0.4),0 18px 40px rgba(15,23,42,0.95);
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 0 0 1px rgba(34,197,94,0.55),0 26px 70px rgba(16,185,129,0.55)}
    .btn:active{transform:translateY(1px) scale(.99);box-shadow:0 0 0 1px rgba(34,197,94,0.6),0 18px 38px rgba(16,185,129,0.4)}
    .summary{
      display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:4px;
      font-size:12px;color:var(--text-muted);flex-wrap:wrap;
    }
    .summary-count{font-weight:500;color:#cbd5f5}
    .badge{
      display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border-radius:999px;
      border:1px dashed rgba(148,163,184,0.8);font-size:11px;
    }
    .badge-dot{width:6px;height:6px;border-radius:999px;background:#22c55e}
    .error{font-size:11px;color:var(--danger);min-height:14px;margin-top:2px}
    .matches{
      background:rgba(15,23,42,0.97);border-radius:14px;border:1px solid var(--border);
      margin-top:6px;padding:8px;max-height:520px;overflow-y:auto;scrollbar-width:thin;
      scrollbar-color:#4b5563 #020617;
    }
    .matches::-webkit-scrollbar{width:6px}
    .matches::-webkit-scrollbar-thumb{background:#4b5563;border-radius:999px}
    .card{
      border-radius:11px;border:1px solid rgba(31,41,55,0.97);
      background:linear-gradient(125deg,rgba(15,23,42,1),rgba(15,23,42,0.98));
      padding:8px 8px 7px;
      display:grid;grid-template-columns:minmax(0,2.1fr) minmax(0,1.5fr) auto;
      column-gap:10px;row-gap:3px;align-items:center;font-size:12px;
      margin-bottom:7px;cursor:pointer;
      transition:transform .08s,box-shadow .12s,border-color .1s,background .1s;
    }
    @media(max-width:720px){.card{grid-template-columns:minmax(0,1.8fr) minmax(0,1.4fr)}}
    @media(max-width:560px){.card{grid-template-columns:minmax(0,1fr)}}
    .card:hover{
      transform:translateY(-1px);border-color:rgba(34,197,94,0.65);
      box-shadow:0 18px 42px rgba(15,23,42,0.98),0 0 30px rgba(34,197,94,0.2);
      background:linear-gradient(125deg,rgba(15,23,42,1),rgba(5,46,22,0.97));
    }
    .teams{display:flex;flex-direction:column;gap:3px}
    .team-row{display:flex;align-items:center;gap:6px}
    .team-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .vs{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.16em}
    .info-line{font-size:11px;color:var(--text-muted)}
    .info-date{font-size:11px;color:#e5e7eb}
    .extra{display:flex;flex-direction:column;gap:4px;align-items:flex-end}
    .pill-small{
      padding:2px 6px;border-radius:999px;border:1px solid rgba(148,163,184,0.9);
      font-size:10px;text-transform:uppercase;letter-spacing:0.12em;color:#e5e7eb;white-space:nowrap;
    }
    .status-live{border-color:rgba(248,113,113,0.9);color:#fed7aa}
    .status-finished{border-color:rgba(34,197,94,0.9);color:#bbf7d0}
    .status-upcoming{border-color:rgba(148,163,184,0.9);color:#e5e7eb}
    .empty{font-size:12px;color:var(--text-muted);padding:10px 2px 4px}
    .right{display:flex;flex-direction:column;gap:10px}
    .panel{
      background:rgba(15,23,42,0.97);border-radius:14px;border:1px solid var(--border);padding:10px;
    }
    .panel-header{display:flex;justify-content:space-between;align-items:center;font-size:12px;margin-bottom:6px}
    .panel-title{font-weight:500}
    .panel-badge{
      font-size:10px;padding:2px 7px;border-radius:999px;border:1px solid rgba(56,189,248,0.8);
      color:#bae6fd;background:radial-gradient(circle at top,rgba(56,189,248,0.4),transparent);
      text-transform:uppercase;letter-spacing:0.12em;
    }
    pre{
      margin:0;padding:8px;border-radius:10px;
      background:rgba(10,15,30,0.97);border:1px solid rgba(31,41,55,0.97);
      font-size:11px;overflow-x:auto;color:#e5e7eb;
    }
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .match-detail{font-size:12px;color:#e5e7eb;line-height:1.4}
    .match-detail span{color:var(--text-muted)}
  </style>
</head>
<body>
<div class="shell">
  <header>
    <div class="brand">
      <div class="pill">
        <span class="pill-dot"></span>
        Premier League · Demo
      </div>
      <div class="title-row">
        <div class="logo">PL</div>
        <h1>Матчи Англии</h1>
      </div>
      <p class="subtitle">
        Демо‑страница: выбор даты, матча и просмотр деталей по заранее загруженному JSON (без запросов к серверу).
      </p>
    </div>
    <div class="meta">
      <div class="meta-row">
        <div class="meta-pill">Фильтры: дата · матч</div>
        <div class="meta-pill">Лига: Premier League</div>
      </div>
    </div>
  </header>

  <main>
    <section class="left">
      <div class="filters">
        <div class="field">
          <div class="label">Дата</div>
          <div class="control">
            <input type="date" id="dateInput">
          </div>
          <div class="hint">Фильтр по дню (из поля starting_at).</div>
        </div>

        <div class="field">
          <div class="label">Страна</div>
          <div class="control">
            <select id="countrySelect" disabled>
              <option>England (фиксировано)</option>
            </select>
            <span class="arrow">▾</span>
          </div>
          <div class="hint">В этом демо все матчи из England.</div>
        </div>

        <div class="field">
          <div class="label">Лига</div>
          <div class="control">
            <select id="leagueSelect" disabled>
              <option>Premier League (фиксировано)</option>
            </select>
            <span class="arrow">▾</span>
          </div>
          <div class="hint">Лига одна — Premier League.</div>
        </div>

        <div class="field">
          <div class="label">Загрузка</div>
          <div class="control actions">
            <button class="btn" id="btnFilter">
              <span>Фильтровать</span>
            </button>
            <button class="btn btn-secondary" id="btnReset">
              <span>Сброс</span>
            </button>
          </div>
          <div class="hint">Фильтрация по выбранной дате.</div>
        </div>
      </div>

      <div class="summary">
        <div id="summaryText">Всего матчей в данных: <span id="totalCount">0</span>.</div>
        <div class="badge">
          <span class="badge-dot"></span>
          <span id="filteredCount">0 матчей в списке</span>
        </div>
      </div>
      <div class="error" id="errorBox"></div>

      <div class="matches" id="matchesList">
        <div class="empty">Список матчей загружается…</div>
      </div>
    </section>

    <section class="right">
      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">Выбранный матч</span>
          <span class="panel-badge">детали</span>
        </div>
        <div class="match-detail" id="selectedMatch">
          <span>Матч не выбран.</span><br>
          Кликните по карточке слева, чтобы увидеть информацию о счёте и событиях.
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <span class="panel-title">Сырые данные</span>
          <span class="panel-badge">JSON</span>
        </div>
        <pre><code id="rawJson">{ }</code></pre>
      </div>
    </section>
  </main>
</div>

<script>
  // ======= Ваш JSON (вставлен целиком) =======
  const FIXTURES = /* вставлен JSON из вопроса */ [
    /* сюда вставьте тот массив, который вы прислали ([
       { "id": 19427530, ... }, {...}, ... ] ) без комментариев */
  ];
  // Чтобы пример сразу работал, можно вместо комментария просто вставить ваш JSON.

  const dateInput = document.getElementById('dateInput');
  const btnFilter = document.getElementById('btnFilter');
  const btnReset = document.getElementById('btnReset');
  const matchesListEl = document.getElementById('matchesList');
  const summaryTextEl = document.getElementById('summaryText');
  const totalCountEl = document.getElementById('totalCount');
  const filteredCountEl = document.getElementById('filteredCount');
  const errorBoxEl = document.getElementById('errorBox');
  const selectedMatchEl = document.getElementById('selectedMatch');
  const rawJsonEl = document.getElementById('rawJson');

  function setError(msg) {
    errorBoxEl.textContent = msg || '';
  }

  function getUniqueMatchDates(data) {
    const set = new Set();
    data.forEach(m => {
      if (!m.starting_at) return;
      const d = m.starting_at.slice(0, 10); // "YYYY-MM-DD"
      set.add(d);
    });
    return Array.from(set).sort();
  }

  function initDate() {
    const dates = getUniqueMatchDates(FIXTURES);
    if (dates.length > 0) {
      dateInput.value = dates[0];
    }
    totalCountEl.textContent = FIXTURES.length.toString();
  }

  function formatDateTime(str) {
    if (!str) return 'Время не указано';
    const iso = str.replace(' ', 'T') + 'Z';
    const d = new Date(iso);
    if (isNaN(d.getTime())) return str;
    return d.toLocaleString('ru-RU', {
      day: '2-digit',
      month: '2-digit',
      hour: '2-digit',
      minute: '2-digit'
    });
  }

  function getTeams(fixture) {
    const participants = fixture.participants || [];
    let home = participants.find(p => p.meta && p.meta.location === 'home') || participants[0];
    let away = participants.find(p => p.meta && p.meta.location === 'away') || participants[1];
    return {
      homeName: home ? home.name : 'Home',
      awayName: away ? away.name : 'Away'
    };
  }

  function getScore(fixture) {
    const scores = fixture.scores || [];
    let home = 0, away = 0;
    scores.forEach(s => {
      if (!s.score || typeof s.score.goals === 'undefined') return;
      if (s.score.participant === 'home') home = s.score.goals;
      if (s.score.participant === 'away') away = s.score.goals;
    });
    return { home, away };
  }

  function getStatus(fixture) {
    // state_id 5 в вашем примере — скорее всего "finished" или "live", для демо считаем завершённым
    const state = fixture.state_id;
    if (state === 5) return { text: 'В игре / завершён', className: 'status-live' };
    return { text: 'Запланирован', className: 'status-upcoming' };
  }

  function filterFixtures() {
    const date = dateInput.value;
    if (!date) return FIXTURES.slice();
    return FIXTURES.filter(f =>
      f.starting_at && f.starting_at.startsWith(date)
    );
  }

  function renderList() {
    const list = filterFixtures();
    matchesListEl.innerHTML = '';

    if (list.length === 0) {
      matchesListEl.innerHTML = '<div class="empty">На выбранную дату матчей нет.</div>';
      filteredCountEl.textContent = '0 матчей';
      summaryTextEl.textContent = 'Фильтр по дате; совпадений нет.';
      selectedMatchEl.innerHTML = '<span>Матч не выбран.</span>';
      rawJsonEl.textContent = '{ }';
      return;
    }

    filteredCountEl.textContent = list.length + ' матчей';
    summaryTextEl.textContent = 'Фильтр по дате; найдено ' + list.length + ' матчей.';

    list.forEach(fixture => {
      const { homeName, awayName } = getTeams(fixture);
      const { home, away } = getScore(fixture);
      const status = getStatus(fixture);
      const league = fixture.league ? fixture.league.name : 'Лига';
      const country = fixture.league && fixture.league.country ? fixture.league.country.name : 'Страна';
      const round = fixture.round ? fixture.round.name : null;
      const dt = formatDateTime(fixture.starting_at);

      const card = document.createElement('article');
      card.className = 'card';

      const teamsEl = document.createElement('div');
      teamsEl.className = 'teams';
      teamsEl.innerHTML = `
        <div class="team-row">
          <span class="team-name">${homeName}</span>
          <span>${home !== null ? home : ''}</span>
        </div>
        <div class="vs">VS</div>
        <div class="team-row">
          <span class="team-name">${awayName}</span>
          <span>${away !== null ? away : ''}</span>
        </div>
      `;

      const infoEl = document.createElement('div');
      infoEl.innerHTML = `
        <div class="info-line">${league} · ${country}</div>
        <div class="info-date">${dt}</div>
      `;

      const extraEl = document.createElement('div');
      extraEl.className = 'extra';
      extraEl.innerHTML = `
        <div class="pill-small ${status.className}">${status.text}</div>
        ${round ? `<div class="pill-small">Тур ${round}</div>` : ''}
      `;

      card.appendChild(teamsEl);
      card.appendChild(infoEl);
      card.appendChild(extraEl);

      card.addEventListener('click', () => {
        showMatchDetails(fixture);
      });

      matchesListEl.appendChild(card);
    });
  }

  function showMatchDetails(fixture) {
    const { homeName, awayName } = getTeams(fixture);
    const { home, away } = getScore(fixture);
    const dt = formatDateTime(fixture.starting_at);
    const round = fixture.round ? fixture.round.name : '-';
    const league = fixture.league ? fixture.league.name : 'Лига';

    // Простое описание событий
    const events = fixture.events || [];
    let eventsHtml = '';
    if (events.length === 0) {
      eventsHtml = '<span>События: нет данных.</span>';
    } else {
      eventsHtml = 'События:<br>' + events.map(e => {
        const minute = e.minute != null ? e.minute + "'" : '';
        const type = e.type ? e.type.name : '';
        const player = e.player_name || '';
        const info = e.info || '';
        const result = e.result || '';
        return '&nbsp;• ' + minute + ' ' + type + ' ' + player +
               (info ? ' (' + info + ')' : '') +
               (result ? ' — ' + result : '');
      }).join('<br>');
    }

    selectedMatchEl.innerHTML = `
      Матч: <strong>${homeName} ${home}:${away} ${awayName}</strong><br>
      <span>Лига:</span> ${league}, тур ${round}<br>
      <span>Дата/время:</span> ${dt}<br>
      <br>${eventsHtml}
    `;

    rawJsonEl.textContent = JSON.stringify(fixture, null, 2);
  }

  // Инициализация
  initDate();
  renderList();

  btnFilter.addEventListener('click', () => {
    setError('');
    renderList();
  });

  btnReset.addEventListener('click', () => {
    dateInput.value = '';
    setError('');
    renderList();
  });
</script>
</body>
</html>
